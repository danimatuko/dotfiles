#!/bin/bash

# Load XDG user directories (e.g., XDG_PICTURES_DIR)
[[ -f ~/.config/user-dirs.dirs ]] && source ~/.config/user-dirs.dirs

# Use Screenshots inside system Pictures folder, or fallback
PICTURES_DIR="${XDG_PICTURES_DIR:-$HOME/Pictures}"
OUTPUT_DIR="$PICTURES_DIR/Screenshots"

# Take screenshot using hyprshot and process with satty
pkill slurp || hyprshot -m "${1:-region}" --raw |
  satty --filename - \
        --output-filename "$OUTPUT_DIR/screenshot-$(date +'%Y-%m-%d_%H-%M-%S').png" \
        --early-exit \
        --actions-on-enter save-to-clipboard \
        --save-after-copy \
        --copy-command 'wl-copy'

